<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Quản Trị Pocky Doll</title>
    
    <link rel="stylesheet" href="../../assets/icon/fontawesome-free-7.1.0-web/css/all.min.css">

    <link rel="stylesheet" href="../../assets/css/admin.css">
        
    <!-- Hàm kiểm tra đăng nhập (tiếng Việt)
         - CHỈ sử dụng sessionStorage để không lưu đăng nhập theo máy
         - Nếu chưa đăng nhập -> chuyển hướng về login.html
         - Sau khi đăng nhập, chỉ lưu trong sessionStorage (mở tab mới hoặc đóng trình duyệt sẽ yêu cầu đăng nhập lại)
    -->
    <!-- Ẩn tạm nội dung để tránh flash trước khi kiểm tra -->
    <style id="auth-hide-style">body{visibility:hidden;}</style>
    <script>
    (function checkLogin() {
        try {
            var path = window.location.pathname.split('/').pop();
            // Nếu đang ở trang login thì hiển thị login (bỏ style ẩn)
            if (path === 'login.html') { var s = document.getElementById('auth-hide-style'); if (s) s.parentNode.removeChild(s); return; }

            // Chỉ kiểm tra sessionStorage (không dùng localStorage)
            var isLoggedIn = sessionStorage.getItem('isLoggedIn') === 'true';
            var adminUser = sessionStorage.getItem('adminUser') || sessionStorage.getItem('adminName');

            if (isLoggedIn || adminUser) {
                // đã đăng nhập trong session => hiển thị nội dung
                var s2 = document.getElementById('auth-hide-style'); if (s2) s2.parentNode.removeChild(s2);
                return;
            }

            // nếu không thì chuyển về login
            window.location.replace('login.html');
        } catch (e) {
            window.location.replace('login.html');
        }
    })();
    </script>

    <script src="../../assets/js/admin.js"></script>

</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <nav class="nav-menu">
                    <a href="#products" class="nav-item active" onclick="showPage('products')">
                        <span>Sản phẩm</span>
                    </a>
                    <a href="#users" class="nav-item" onclick="showPage('users')">
                        <span>Người dùng</span>
                    </a>
                <a href="#receipts" class="nav-item" onclick="showPage('receipts')">
                    <span>Phiếu nhập</span>
                </a>
                <a href="#pricing" class="nav-item" onclick="showPage('pricing')">
                    <span>Định giá</span>
                </a>
                <a href="#orders" class="nav-item" onclick="showPage('orders')">
                    <span>Đơn hàng</span>
                </a>
                <a href="#inventory" class="nav-item" onclick="showPage('inventory')">
                    <span>Tồn kho</span>
                </a>
            </nav>
            </div>
        </aside>

        <div class="main-content">
            <div class="topbar">
                <div class="topbar-left">
                    <button class="hamburger-btn" onclick="toggleSidebar()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <div class="topbar-brand">Pocky Doll</div>
                </div>
                <div class="topbar-right">
                    <button class="logout-button" onclick="handleLogout()" style="border: 2px solid var(--blue);">
                        <div class="user-avatar">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <span>Xin chào, sgunhom4</span>
                        <svg class="logout-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="2"/>
                            <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2"/>
                            <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="page-content">
                
                <div id="products-page" class="page-section active">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Sản phẩm</h2>
                          
                        </div>
                        <div class="page-actions">
                            <select class="filter-select" id="categoryFilter" onchange="filterByCategory()">
                                <option value="">Tất cả danh mục</option>
                                <option value="naruto">Naruto</option>
                                <option value="demon-slayer">Demon Slayer</option>
                                <option value="genshin">Genshin Impact</option>
                                <option value="miku">Hatsune Miku</option>
                            </select>
                            <button class="add-button" onclick="showAddProductModal()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Thêm sản phẩm
                            </button>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Sản phẩm</th> <th style="font-size: 16px; color: #000; font-weight: bold;">SKU</th> <th style="font-size: 16px; color: #000; font-weight: bold;">Giá vốn</th> <th style="font-size: 16px; color: #000; font-weight: bold;">Giá bán</th> <th style="font-size: 16px; color: #000; font-weight: bold;">SL</th> <th style="font-size: 16px; color: #000; font-weight: bold;">Trạng thái</th> <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th> </tr>
                                </thead>
                                <tbody>
                                    <tr data-product-id="1" data-category="naruto">
                                        <td>
                                            <div class="product-cell">
                                                <img src="images/NARUTO/Naruto.png" alt="Naruto" class="product-image">
                                                <div class="product-info">
                                                    <div class="product-name">Naruto</div>
                                                    <div class="product-category">Naruto</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>SKU001</td>
                                        <td>300.000 ₫</td>
                                        <td>300.000 ₫</td>
                                        <td>125</td>
                                        <td>
                                            <span class="status-badge status-active" id="status-1">Đang bán</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditProductModal(1)">Sửa</button>
                                                <button class="action-button" onclick="toggleProductStatus(1)" id="toggle-btn-1">Ẩn</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-product-id="2" data-category="demon-slayer">
                                        <td>
                                            <div class="product-cell">
                                                <img src="images/DEMON SLAYER/Kamado Tanjiro.png" alt="Tanjiro Kamado" class="product-image">
                                                <div class="product-info">
                                                    <div class="product-name">Tanjiro Kamado</div>
                                                    <div class="product-category">Demon Slayer</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>SKU002</td>
                                        <td>300.000 ₫</td>
                                        <td>300.000 ₫</td>
                                        <td>89</td>
                                        <td>
                                            <span class="status-badge status-active" id="status-2">Đang bán</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditProductModal(2)">Sửa</button>
                                                <button class="action-button" onclick="toggleProductStatus(2)" id="toggle-btn-2">Ẩn</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-product-id="3" data-category="miku">
                                        <td>
                                            <div class="product-cell">
                                                <img src="Images/HATSUNE MIKU/Miku 2.png" alt="Miku" class="product-image">
                                                <div class="product-info">
                                                    <div class="product-name">Miku</div>
                                                    <div class="product-category">Hatsune Miku</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>SKU003</td>
                                        <td>300.000 ₫</td>
                                        <td>300.000 ₫</td>
                                        <td>45</td>
                                        <td>
                                            <span class="status-badge status-active" id="status-3">Đang bán</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditProductModal(3)">Sửa</button>
                                                <button class="action-button" onclick="toggleProductStatus(3)" id="toggle-btn-3">Ẩn</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-product-id="4" data-category="naruto">
                                        <td>
                                            <div class="product-cell">
                                                <img src="Images/NARUTO/Hinata.png" alt="Hinata" class="product-image">
                                                <div class="product-info">
                                                    <div class="product-name">Hinata</div>
                                                    <div class="product-category">Naruto</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>SKU004</td>
                                        <td>300.000 ₫</td>
                                        <td>300.000 ₫</td>
                                        <td>0</td>
                                        <td>
                                            <span class="status-badge status-warning" id="status-4">Hết hàng</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditProductModal(4)">Sửa</button>
                                                <button class="action-button" onclick="toggleProductStatus(4)" id="toggle-btn-4">Ẩn</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-product-id="5" data-category="naruto">
                                        <td>
                                            <div class="product-cell">
                                                <img src="Images/NARUTO/Sasuke.png" alt="Sasuke" class="product-image">
                                                <div class="product-info">
                                                    <div class="product-name">Sasuke</div>
                                                    <div class="product-category">Naruto</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>SKU005</td>
                                        <td>300.000 ₫</td>
                                        <td>300.000 ₫</td>
                                        <td>78</td>
                                        <td>
                                            <span class="status-badge status-disabled" id="status-5">Ẩn</span>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditProductModal(5)">Sửa</button>
                                                <button class="action-button" onclick="toggleProductStatus(5)" id="toggle-btn-5">Hiện</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="table-footer">
                            <div class="results-info">Hiển thị 5 kết quả</div>
                            <div class="pagination">
                                <button class="pagination-button">Trước</button>
                                <div class="page-number">1</div>
                                <button class="pagination-button">Sau</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="dashboard-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Trang chủ</h2>
                            <p class="page-subtitle">Tổng quan hệ thống</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-title">Tổng sản phẩm</div>
                            <div class="stat-value">124</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Tổng đơn hàng</div>
                            <div class="stat-value">89</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Sắp hết hàng</div>
                            <div class="stat-value warning">5</div>
                        </div>
                    </div>
                </div>

                <div id="users-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Người dùng</h2>
                        
                        </div>
                        <div class="page-actions">
                            <button class="add-button" onclick="showAddUserModal()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Thêm người dùng
                            </button>
                        </div>
                    </div>
                    <div class="content-card">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Họ tên</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Thông tin liên hệ</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Vai trò</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Trạng thái</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-user-id="USER001" id="user-row-USER001">
                                        <td>Nguyễn Văn A</td>
                                        <td>a@example.com</td>
                                        <td>Khách hàng</td>
                                        <td><span class="status-badge status-active" id="user-status-USER001">Hoạt động</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditUserModal('USER001')">Sửa</button>
                                                <button class="action-button" onclick="lockUser('USER001')">Khóa</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-user-id="USER002" id="user-row-USER002">
                                        <td>Trần Thị B</td>
                                        <td>0912345678</td>
                                        <td>Khách hàng</td>
                                        <td><span class="status-badge status-active" id="user-status-USER002">Hoạt động</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditUserModal('USER002')">Sửa</button>
                                                <button class="action-button" onclick="lockUser('USER002')">Khóa</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-user-id="USER003" id="user-row-USER003">
                                        <td>Lê Văn C</td>
                                        <td>levanc@gmail.com</td>
                                        <td>Nhân viên</td>
                                        <td><span class="status-badge status-active" id="user-status-USER003">Hoạt động</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditUserModal('USER003')">Sửa</button>
                                                <button class="action-button" onclick="lockUser('USER003')">Khóa</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-user-id="USER004" id="user-row-USER004">
                                        <td>Phạm Thị D</td>
                                        <td>0987654321</td>
                                        <td>Khách hàng</td>
                                        <td><span class="status-badge status-disabled" id="user-status-USER004">Khóa</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditUserModal('USER004')">Sửa</button>
                                                <button class="action-button" onclick="lockUser('USER004')">Mở</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-user-id="USER005" id="user-row-USER005">
                                        <td>Hoàng Văn E</td>
                                        <td>hoangvane@yahoo.com</td>
                                        <td>Quản trị viên</td>
                                        <td><span class="status-badge status-active" id="user-status-USER005">Hoạt động</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditUserModal('USER005')">Sửa</button>
                                                <button class="action-button" onclick="lockUser('USER005')">Khóa</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="receipts-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Phiếu nhập kho</h2>
                            
                        </div>
                        <div class="page-actions">
                            <button class="add-button" onclick="showAddReceiptModal()">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Tạo phiếu nhập
                            </button>
                        </div>
                    </div>

                    <div class="order-filters-compact">
                        <div class="filter-row-compact">
                            <div class="filter-item">
                                <label>Từ ngày:</label>
                                <div class="date-input-wrapper">
                                    <input type="text" id="receiptDateFrom" placeholder="ngày/tháng/năm" 
                                           onkeydown="handleDateKeydown(this, event); handleDateEnter(this, event)"
                                           onblur="formatAndValidateDate(this)"
                                           title="Nhập dd/mm/yyyy, nhấn Enter để xác nhận">
                                    <span class="calendar-icon" onclick="openDatePicker('receiptDateFrom')" title="Chọn ngày từ lịch">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                                            <rect x="3" y="4" width="18" height="15" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="filter-item">
                                <label>Đến ngày:</label>
                                <div class="date-input-wrapper">
                                    <input type="text" id="receiptDateTo" placeholder="ngày/tháng/năm" 
                                           onkeydown="handleDateKeydown(this, event); handleDateEnter(this, event)"
                                           onblur="formatAndValidateDate(this)"
                                           title="Nhập ngày/tháng/năm, nhấn Enter để xác nhận">
                                    <span class="calendar-icon" onclick="openDatePicker('receiptDateTo')" title="Chọn ngày từ lịch">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                                            <rect x="3" y="4" width="18" height="15" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="filter-item">
                                <label>Nhà cung cấp:</label>
                                <select id="supplierFilter" onchange="filterReceipts()">
                                    <option value="">Tất cả</option>
                                    <option value="Nhà cung cấp A">Nhà cung cấp A</option>
                                    <option value="Nhà cung cấp B">Nhà cung cấp B</option>
                                    <option value="Nhà cung cấp C">Nhà cung cấp C</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label>Trạng thái:</label>
                                <select id="receiptStatusFilter" onchange="filterReceipts()">
                                    <option value="">Tất cả</option>
                                    <option value="draft">Đang tạo</option>
                                    <option value="completed">Hoàn thành</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <button class="reset-filter-btn" onclick="resetReceiptFilters()" title="Đặt lại tất cả bộ lọc">
                                    Đặt lại
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="search-container" style="margin-bottom: 20px;">
                            <input type="text" placeholder="Tìm mã phiếu, nhà cung cấp..." 
                                   class="search-input" id="receiptSearch" onkeyup="searchReceipts()">
                            <svg class="search-icon" onclick="searchReceipts()" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Mã phiếu</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Ngày nhập</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Nhà cung cấp</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Tổng sản phẩm</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Tổng tiền</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Trạng thái</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="receiptsTableBody">
                                    <tr data-status="completed" data-date="2025-10-25" data-supplier="Nhà cung cấp A">
                                        <td><a href="#" onclick="viewReceiptDetails('PN001')" class="order-link">PN001</a></td>
                                        <td>25/10/2025</td>
                                        <td>Nhà cung cấp A</td>
                                        <td>3 sản phẩm</td>
                                        <td>300.000 ₫</td>
                                        <td><span class="status-badge status-active">Hoàn thành</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="viewReceiptDetails('PN001')">Chi tiết</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="draft" data-date="2025-10-28" data-supplier="Nhà cung cấp B">
                                        <td><a href="#" onclick="viewReceiptDetails('PN002')" class="order-link">PN002</a></td>
                                        <td>28/10/2025</td>
                                        <td>Nhà cung cấp B</td>
                                        <td>2 sản phẩm</td>
                                        <td>300.000 ₫</td>
                                        <td><span class="status-badge status-pending">Đang tạo</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditReceiptModal('PN002')">Sửa</button>
                                                <button class="action-button" onclick="completeReceipt('PN002')">Hoàn thành</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="draft" data-date="2025-10-30" data-supplier="Nhà cung cấp C">
                                        <td><a href="#" onclick="viewReceiptDetails('PN003')" class="order-link">PN003</a></td>
                                        <td>30/10/2025</td>
                                        <td>Nhà cung cấp C</td>
                                        <td>1 sản phẩm</td>
                                        <td>300.000 ₫</td>
                                        <td><span class="status-badge status-pending">Đang tạo</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showEditReceiptModal('PN003')">Sửa</button>
                                                <button class="action-button" onclick="completeReceipt('PN003')">Hoàn thành</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="order-summary">
                            <div class="summary-cards">
                                <div class="summary-card">
                                    <div class="summary-title">Tổng phiếu nhập</div>
                                    <div class="summary-value" id="totalReceipts">3</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Đang tạo</div>
                                    <div class="summary-value warning" id="draftReceipts">2</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Đã hoàn thành</div>
                                    <div class="summary-value success" id="completedReceipts">1</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Tổng giá trị</div>
                                    <div class="summary-value" id="totalReceiptValue">900.000 ₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="pricing-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Định giá</h2>
                            
                        </div>
                        <div class="page-actions">
                        </div>
                    </div>
                    <div class="content-card">
                        <div style="display: flex; gap: 15px; margin-bottom: 20px; align-items: center;">
                            <div class="search-container" style="margin-bottom: 0;">
                                <input type="text" placeholder="Tìm sản phẩm..." class="search-input" oninput="searchPricingProducts(this.value)">
                                <svg class="search-icon" onclick="searchPricingProducts(document.querySelector('#pricing-page .search-input').value)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                            </div>
                            <div>
                                <select class="filter-select" onchange="filterPricingByCategory(this.value)">
                                    <option value="">Tất cả sản phẩm</option>
                                    <option value="naruto">Naruto</option>
                                    <option value="demon-slayer">Demon Slayer</option>
                                    <option value="genshin">Genshin Impact</option>
                                    <option value="miku">Hatsune Miku</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Mã SP</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Sản phẩm</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Loại</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Giá vốn</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">% Lợi nhuận</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Giá bán lẻ</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Cập nhật</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="pricingTableBody">
                                    <tr data-category="naruto">
                                        <td>SKU001</td>
                                        <td>
                                            <div class="product-info">
                                                <div class="product-name">Naruto Sage Mode</div>
                                                <div class="product-category">Naruto</div>
                                            </div>
                                        </td>
                                        <td>Naruto</td>
                                        <td class="cost-price">300.000 ₫</td>
                                        <td>
                                            <input type="number" value="90" class="markup-input" min="0" max="1000" step="0.1" 
                                                   id="profit-SKU001" onchange="calculateRetailPrice(this, 'SKU001')" data-product="SKU001">
                                            <span class="profit-suffix">%</span>
                                        </td>
                                        <td class="retail-price" id="retail-SKU001">300.000 ₫</td>
                                        <td class="last-updated">25/10/2025</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="savePricing('SKU001')">Lưu</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-category="demon-slayer">
                                        <td>SKU002</td>
                                        <td>
                                            <div class="product-info">
                                                <div class="product-name">Tanjiro Kamado</div>
                                                <div class="product-category">Demon Slayer</div>
                                            </div>
                                        </td>
                                        <td>Demon Slayer</td>
                                        <td class="cost-price">300.000 ₫</td>
                                        <td>
                                            <input type="number" value="60" class="markup-input" min="0" max="1000" step="0.1" 
                                                   id="profit-SKU002" onchange="calculateRetailPrice(this, 'SKU002')" data-product="SKU002">
                                            <span class="profit-suffix">%</span>
                                        </td>
                                        <td class="retail-price" id="retail-SKU002">300.000 ₫</td>
                                        <td class="last-updated">23/10/2025</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="savePricing('SKU002')">Lưu</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-category="genshin">
                                        <td>SKU003</td>
                                        <td>
                                            <div class="product-info">
                                                <div class="product-name">Raiden Shogun</div>
                                                <div class="product-category">Genshin Impact</div>
                                            </div>
                                        </td>
                                        <td>Genshin Impact</td>
                                        <td class="cost-price">300.000 ₫</td>
                                        <td>
                                            <input type="number" value="75" class="markup-input" min="0" max="1000" step="0.1" 
                                                   id="profit-SKU003" onchange="calculateRetailPrice(this, 'SKU003')" data-product="SKU003">
                                            <span class="profit-suffix">%</span>
                                        </td>
                                        <td class="retail-price" id="retail-SKU003">300.000 ₫</td>
                                        <td class="last-updated">20/10/2025</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="savePricing('SKU003')">Lưu</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-category="miku">
                                        <td>SKU004</td>
                                        <td>
                                            <div class="product-info">
                                                <div class="product-name">Hatsune Miku Racing</div>
                                                <div class="product-category">Hatsune Miku</div>
                                            </div>
                                        </td>
                                        <td>Hatsune Miku</td>
                                        <td class="cost-price">300.000 ₫</td>
                                        <td>
                                            <input type="number" value="65" class="markup-input" min="0" max="1000" step="0.1" 
                                                   id="profit-SKU004" onchange="calculateRetailPrice(this, 'SKU004')" data-product="SKU004">
                                            <span class="profit-suffix">%</span>
                                        </td>
                                        <td class="retail-price" id="retail-SKU004">300.000 ₫</td>
                                        <td class="last-updated">18/10/2025</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="savePricing('SKU004')">Lưu</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-category="demon-slayer">
                                        <td>SKU005</td>
                                        <td>
                                            <div class="product-info">
                                                <div class="product-name">Nezuko Demon Form</div>
                                                <div class="product-category">Demon Slayer</div>
                                            </div>
                                        </td>
                                        <td>Demon Slayer</td>
                                        <td class="cost-price">300.000 ₫</td>
                                        <td>
                                            <input type="number" value="70" class="markup-input" min="0" max="1000" step="0.1" 
                                                   id="profit-SKU005" onchange="calculateRetailPrice(this, 'SKU005')" data-product="SKU005">
                                            <span class="profit-suffix">%</span>
                                        </td>
                                        <td class="retail-price" id="retail-SKU005">300.000 ₫</td>
                                        <td class="last-updated">22/10/2025</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="savePricing('SKU005')">Lưu</button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="order-summary">
                            <div class="summary-cards">
                                <div class="summary-card">
                                    <div class="summary-title">Tổng sản phẩm</div>
                                    <div class="summary-value" id="totalProducts">5</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">% Lợi nhuận TB</div>
                                    <div class="summary-value success" id="avgProfitMargin">72.00%</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Tổng giá vốn</div>
                                    <div class="summary-value" id="totalCostPrice">1.500.000 ₫</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Tổng giá bán</div>
                                    <div class="summary-value" id="totalRetailPrice">1.500.000 ₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="orders-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Đơn hàng</h2>
                         
                        </div>
                    </div>

                    <div class="order-filters-compact">
                        <div class="filter-row-compact">
                            <div class="filter-item">
                                <label>Từ ngày:</label>
                                <div class="date-input-wrapper">
                                    <input type="text" id="dateFrom" placeholder="ngày/tháng/năm" 
                                           onkeydown="handleDateKeydown(this, event); handleDateEnter(this, event)"
                                           onblur="formatAndValidateDate(this)"
                                           title="Nhập ngày/tháng/năm, nhấn Enter để xác nhận">
                                    <span class="calendar-icon" onclick="openDatePicker('dateFrom')" title="Chọn ngày từ lịch">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                                            <rect x="3" y="4" width="18" height="15" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="filter-item">
                                <label>Đến ngày:</label>
                                <div class="date-input-wrapper">
                                    <input type="text" id="dateTo" placeholder="ngày/tháng/năm" 
                                           onkeydown="handleDateKeydown(this, event); handleDateEnter(this, event)"
                                           onblur="formatAndValidateDate(this)"
                                           title="Nhập ngày/tháng/năm, nhấn Enter để xác nhận">
                                    <span class="calendar-icon" onclick="openDatePicker('dateTo')" title="Chọn ngày từ lịch">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                                            <rect x="3" y="4" width="18" height="15" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="filter-item">
                                <label>Trạng thái:</label>
                                <select id="statusFilter" onchange="filterOrders()">
                                    <option value="">Tất cả</option>
                                    <option value="pending">Chưa xử lý</option>
                                    <option value="confirmed">Đã xác nhận</option>
                                    <option value="delivered">Đã giao</option>
                                    <option value="cancelled">Đã hủy</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label>Sắp xếp:</label>
                                <select id="sortBy" onchange="sortOrders()">
                                    <option value="date">Ngày mới nhất</option>
                                    <option value="ward">Theo phường</option>
                                    <option value="district">Theo quận</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <button class="reset-btn-inline" onclick="resetOrderFilters()">Đặt lại</button>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Mã đơn hàng</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Ngày đặt</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Người dùng</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Khu vực giao</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Tổng tiền</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Trạng thái</th>
                                        <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody">
                                    <tr data-status="pending" data-date="2025-10-26" data-district="quận 1" data-ward="phường bến nghé">
                                        <td><a href="#" onclick="showOrderDetailModal('ORDER001')" class="order-link">ORDER001</a></td>
                                        <td>26/10/2025</td>
                                        <td>Nguyễn Văn A</td>
                                        <td>P.Bến Nghé, Q.1</td>
                                        <td class="price-text">300.000 ₫</td>
                                        <td>
                                            <select class="status-select" onchange="updateOrderStatus('ORDER001', this.value)">
                                                <option value="pending" selected>Chưa xử lý</option>
                                                <option value="confirmed">Đã xác nhận</option>
                                                <option value="delivered">Đã giao thành công</option>
                                                <option value="cancelled">Đã hủy</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showOrderDetailModal('ORDER001')">Chi tiết</button>
                                        
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="confirmed" data-date="2025-10-25" data-district="quận 7" data-ward="phường tân thuận đông">
                                        <td><a href="#" onclick="showOrderDetailModal('ORDER002')" class="order-link">ORDER002</a></td>
                                        <td>25/10/2025</td>
                                        <td>Trần Thị B</td>
                                        <td>P.Tân Thuận Đông, Q.7</td>
                                        <td class="price-text">300.000 ₫</td>
                                        <td>
                                            <select class="status-select" onchange="updateOrderStatus('ORDER002', this.value)">
                                                <option value="pending">Chưa xử lý</option>
                                                <option value="confirmed" selected>Đã xác nhận</option>
                                                <option value="delivered">Đã giao thành công</option>
                                                <option value="cancelled">Đã hủy</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showOrderDetailModal('ORDER002')">Chi tiết</button>
                                                
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="delivered" data-date="2025-10-24" data-district="quận 3" data-ward="phường 6">
                                        <td><a href="#" onclick="showOrderDetailModal('ORDER003')" class="order-link">ORDER003</a></td>
                                        <td>24/10/2025</td>
                                        <td>Lê Văn C</td>
                                        <td>P.6, Q.3</td>
                                        <td class="price-text">300.000 ₫</td>
                                        <td>
                                            <select class="status-select" onchange="updateOrderStatus('ORDER003', this.value)">
                                                <option value="pending">Chưa xử lý</option>
                                                <option value="confirmed">Đã xác nhận</option>
                                                <option value="delivered" selected>Đã giao thành công</option>
                                                <option value="cancelled">Đã hủy</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showOrderDetailModal('ORDER003')">Chi tiết</button>
                                                
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="cancelled" data-date="2025-10-23" data-district="quận 1" data-ward="phường bến thành">
                                        <td><a href="#" onclick="showOrderDetailModal('ORDER004')" class="order-link">ORDER004</a></td>
                                        <td>23/10/2025</td>
                                        <td>Phạm Thị D</td>
                                        <td>P.Bến Thành, Q.1</td>
                                        <td class="price-text">300.000 ₫</td>
                                        <td>
                                            <select class="status-select" onchange="updateOrderStatus('ORDER004', this.value)">
                                                <option value="pending">Chưa xử lý</option>
                                                <option value="confirmed">Đã xác nhận</option>
                                                <option value="delivered">Đã giao thành công</option>
                                                <option value="cancelled" selected>Đã hủy</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showOrderDetailModal('ORDER004')">Chi tiết</button>
                                                
                                            </div>
                                        </td>
                                    </tr>
                                    <tr data-status="pending" data-date="2025-10-30" data-district="quận 3" data-ward="phường 6">
                                        <td><a href="#" onclick="showOrderDetailModal('ORDER005')" class="order-link">ORDER005</a></td>
                                        <td>30/10/2025</td>
                                        <td>Hoàng Văn E</td>
                                        <td>P.6, Q.3</td>
                                        <td class="price-text">300.000 ₫</td>
                                        <td>
                                            <select class="status-select" onchange="updateOrderStatus('ORDER005', this.value)">
                                                <option value="pending" selected>Chưa xử lý</option>
                                                <option value="confirmed">Đã xác nhận</option>
                                                <option value="delivered">Đã giao thành công</option>
                                                <option value="cancelled">Đã hủy</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="action-button" onclick="showOrderDetailModal('ORDER005')">Chi tiết</button>
                                      
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="order-summary">
                            <div class="summary-cards">
                                <div class="summary-card">
                                    <div class="summary-title">Tổng đơn hàng</div>
                                    <div class="summary-value" id="totalOrders">5</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Chưa xử lý</div>
                                    <div class="summary-value" id="pendingOrders">2</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Đã giao</div>
                                    <div class="summary-value" id="deliveredOrders">1</div>
                                </div>
                                <div class="summary-card">
                                    <div class="summary-title">Tổng doanh thu</div>
                                    <div class="summary-value" id="totalRevenue">1.200.000 ₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="inventory-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Tồn kho</h2>
                        </div>
                        <div class="page-actions">
                        </div>
                    </div>

                    <div class="inventory-summary-compact">
                    <div class="stat-item green">
                        <span class="stat-value" id="totalImport">3</span>
                        <span class="stat-label">Nhập</span>
                    </div>
                    <div class="stat-item red">
                        <span class="stat-value" id="totalExport">1</span>
                        <span class="stat-label">Xuất</span>
                    </div>
                    <div class="stat-item blue">
                        <span class="stat-value" id="currentStock">346</span>
                        <span class="stat-label">Tồn</span>
                    </div>
                    <div class="stat-item warning">
                        <span class="stat-value" id="lowStockCount">0</span>
                        <span class="stat-label">Cảnh báo</span>
                    </div>
                </div>

               <div class="inventory-filters-compact">
                        <div class="filter-row-inline">
                            <div class="search-container" style="margin-bottom: 0; flex: 1; max-width: 500px;">
                                <input type="text" id="productSearch" placeholder="Tìm sản phẩm..." class="search-input" oninput="searchInventory(this.value)">
                                <svg class="search-icon" onclick="searchInventory(document.getElementById('productSearch').value)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                            </div>
                            
                            <div class="filter-item-small">
                                <label>Loại:</label>
                                <select class="filter-select" id="categoryFilter" onchange="filterInventoryByCategory(this.value)">
                                    <option value="">Tất cả loại</option>
                                    <option value="naruto">Naruto</option>
                                    <option value="demon-slayer">Demon Slayer</option>
                                    <option value="genshin">Genshin</option>
                                    <option value="miku">Miku</option>
                                </select>
                            </div>
                            <div class="filter-item-small">
                                <button class="btn-compact" onclick="showStockLookup()">Thống kê</button>
                            </div>
                            <div class="filter-item-small">
                                <button class="reset-filter-btn" onclick="resetInventoryFilters()" title="Đặt lại tất cả bộ lọc">
                                    Đặt lại
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="inventory-grid-compact">
                        <div class="content-card">
                            <div class="table-container">
                                <table class="data-table compact">
                                    <thead>
                                        <tr style="font-size: 16px; color: #000; font-weight: bold;">
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Mã</th>
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Sản phẩm</th>
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Loại</th>
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Tồn</th>
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Trạng thái</th>
                                            <th style="font-size: 16px; color: #000; font-weight: bold;">Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="inventoryTableBody">
                                        <tr data-category="naruto" data-stock="126">
                                            <td>SKU001</td>
                                            <td>Naruto Sage Mode</td>
                                            <td><span class="badge-sm naruto">NARUTO</span></td>
                                            <td class="stock-qty good">126</td>
                                            <td><span class="status-sm good">Đủ hàng</span></td>
                                            <td><button class="btn-sm" onclick="quickRestock('SKU001')">Nhập</button></td>
                                        </tr>
                                        <tr data-category="demon-slayer" data-stock="92">
                                            <td>SKU002</td>
                                            <td>Tanjiro Kamado</td>
                                            <td><span class="badge-sm demon-slayer">DEMON SLAYER</span></td>
                                            <td class="stock-qty good">92</td>
                                            <td><span class="status-sm good">Đủ hàng</span></td>
                                            <td><button class="btn-sm" onclick="quickRestock('SKU002')">Nhập</button></td>
                                        </tr>
                                        <tr data-category="genshin" data-stock="47">
                                            <td>SKU003</td>
                                            <td>Raiden Shogun</td>
                                            <td><span class="badge-sm genshin">GENSHIN IMPACT</span></td>
                                            <td class="stock-qty good">47</td>
                                            <td><span class="status-sm good">Đủ hàng</span></td>
                                            <td><button class="btn-sm" onclick="quickRestock('SKU003')">Nhập</button></td>
                                        </tr>
                                        <tr data-category="miku" data-stock="1">
                                            <td>SKU004</td>
                                            <td>Miku Racing</td>
                                            <td><span class="badge-sm miku">HATSUNE MIKU</span></td>
                                            <td class="stock-qty danger">1</td>
                                            <td><span class="status-sm danger">Cần nhập </span></td>
                                            <td><button class="btn-sm danger" onclick="quickRestock('SKU004')">Nhập</button></td>
                                        </tr>
                                        <tr data-category="demon-slayer" data-stock="80">
                                            <td>SKU005</td>
                                            <td>Nezuko Demon Form</td>
                                            <td><span class="badge-sm demon-slayer">DEMON SLAYER</span></td>
                                            <td class="stock-qty good">80</td>
                                            <td><span class="status-sm good">Đủ hàng</span></td>
                                            <td><button class="btn-sm" onclick="quickRestock('SKU005')">Nhập</button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="sidebar-compact">
                            <div class="alert-card-compact">
                                <h4>Cảnh báo</h4>
                                <div class="alert-list-compact">
                                    <div class="alert-item-sm danger">
                                        <span class="alert-text">SKU004: 1 còn lại</span>
                                        <button class="btn-xs urgent" onclick="quickRestock('SKU004')">Nhập</button>
                                    </div>
                                    <div class="alert-item-sm warning">
                                        <span class="alert-text">SKU003: 47 còn lại</span>
                                        <button class="btn-xs" onclick="quickRestock('SKU003')">Nhập</button>
                                    </div>
                                </div>
                            </div>

                            <div class="category-card-compact">
                                <h4>Theo loại</h4>
                                <div class="category-list-compact">
                                    <div class="category-row">
                                        <span class="badge-sm naruto">Naruto</span>
                                        <span class="count">126</span>
                                        <span class="status-xs good">ĐỦ HÀNG</span>
                                    </div>
                                    <div class="category-row">
                                        <span class="badge-sm demon-slayer">Demon Slayer</span>
                                        <span class="count">172</span>
                                        <span class="status-xs good">ĐỦ HÀNG</span>
                                    </div>
                                    <div class="category-row">
                                        <span class="badge-sm genshin">Genshin Impact</span>
                                        <span class="count">47</span>
                                        <span class="status-xs good">ĐỦ HÀNG</span>
                                    </div>
                                    <div class="category-row">
                                        <span class="badge-sm miku">Hatsune Miku</span>
                                        <span class="count">1</span>
                                        <span class="status-xs danger">Cần nhập </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="settings-page" class="page-section">
                    <div class="page-header">
                        <div class="page-title-section">
                            <h2 class="page-title">Cài đặt</h2>
                            <p class="page-subtitle">Cấu hình hệ thống</p>
                        </div>
                    </div>
                    <div class="content-card">
                        <p>Nội dung cài đặt hệ thống sẽ được hiển thị tại đây...</p>
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="productModalTitle">Thêm sản phẩm mới</h2>
                <span class="close" onclick="hideProductModal()">&times;</span>
            </div>
            
            <form id="productForm" onsubmit="handleProductSubmit(event)" class="modal-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="productCode">Mã sản phẩm <span class="required">*</span></label>
                        <input type="text" id="productCode" name="code" required placeholder="VD: SKU001">
                    </div>
                    <div class="form-group">
                        <label for="productName">Tên sản phẩm <span class="required">*</span></label>
                        <input type="text" id="productName" name="name" required placeholder="Nhập tên sản phẩm">
                    </div>

                    <div class="form-group">
                        <label for="productCategory">Loại sản phẩm <span class="required">*</span></label>
                        <select id="productCategory" name="category" required>
                            <option value="">Chọn loại sản phẩm</option>
                            <option value="naruto">Naruto</option>
                            <option value="demon-slayer">Demon Slayer</option>
                            <option value="genshin">Genshin Impact</option>
                            <option value="miku">Hatsune Miku</option>
                        </select>
                    </div>
                 

                    <div class="form-group">
                        <label for="productQuantity">Số lượng <span class="required">*</span></label>
                        <input type="number" id="productQuantity" name="quantity" required min="0" placeholder="100">
                    </div>

                    <div class="form-group">
                        <label for="productProfitMargin">Tỉ lệ lợi nhuận mong muốn (%)</label>
                        <input type="number" id="productProfitMargin" name="profitMargin" min="0" max="1000" step="0.1" placeholder="30">
                    </div>
                    <div class="form-group">
                        <label for="productSupplier">Nhà cung cấp</label>
                        <input type="text" id="productSupplier" name="supplier" placeholder="Tên nhà cung cấp">
                    </div>

                    <div class="form-group">
                        <label for="productImage">Hình ảnh sản phẩm</label>
                        <input type="file" id="productImage" name="image" accept="image/*">
                        <div id="currentImageSection" style="display: none; margin-top: 10px;">
                            <p id="currentImageInfo" style="font-size: 12px; color: #666;"></p>
                            <button type="button" onclick="removeCurrentImage()" class="remove-image-btn">Bỏ hình hiện tại</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="productStatus">Hiện trạng <span class="required">*</span></label>
                        <select id="productStatus" name="status" required>
                            <option value="selling">Đang bán</option>
                            <option value="out-of-stock">Hết hàng</option>
                            <option value="discontinued">Ngừng bán</option>
                        </select>
                    </div>

                    <div class="form-group form-group-full">
                        <label for="productDescription">Mô tả sản phẩm</label>
                        <textarea id="productDescription" name="description" rows="4" placeholder="Nhập mô tả chi tiết về sản phẩm..."></textarea>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" onclick="hideProductModal()" class="cancel-btn">Hủy</button>
                    <button type="submit" id="productModalSubmit" class="submit-btn">Thêm sản phẩm</button>
                </div>
            </form>
        </div>
    </div>

    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="userModalTitle">Thêm người dùng mới</h2>
                <span class="close" onclick="hideUserModal()">&times;</span>
            </div>
            
            <form id="userForm" onsubmit="handleUserSubmit(event)" class="modal-form" autocomplete="off">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="userName">Họ và tên <span class="required">*</span></label>
                        <input type="text" id="userName" name="fullName" required placeholder="Nhập họ và tên" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="userContact">Thông tin liên hệ <span class="required">*</span></label>
                        <input type="text" id="userContact" name="contact" required placeholder="Nhập email hoặc số điện thoại" autocomplete="off">
                    </div>

                    <div class="form-group" id="passwordGroup">
                        <label>Khởi tạo mật khẩu</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button type="button" id="generatePasswordBtn" onclick="generateRandomPassword()" class="action-button">Tạo mật khẩu</button>
                            <input type="text" id="generatedPassword" name="password" readonly placeholder="Mật khẩu sẽ hiển thị ở đây" style="flex: 1;" autocomplete="off">
                        </div>
                    </div>

                    <div class="form-group" id="confirmPasswordGroup" style="display: none;">
                        <label for="userPasswordConfirm">Xác nhận mật khẩu <span class="required">*</span></label>
                        <input type="password" id="userPasswordConfirm" name="passwordConfirm" placeholder="Nhập lại mật khẩu" minlength="6" autocomplete="off">
                    </div>

                    <div class="form-group">
                        <label for="userRole">Vai trò</label>
                        <select id="userRole" name="role" autocomplete="off">
                            <option value="khach-hang">Khách hàng</option>
                            <option value="nhan-vien">Nhân viên</option>
                            <option value="quan-tri-vien">Quản trị viên</option>
                        </select>
                    </div>

                    <div class="form-group form-group-full">
                        <label for="userNotes">Ghi chú</label>
                        <input type="text" id="userNotes" name="notes" placeholder="Ghi chú thêm (tùy chọn)" autocomplete="off">
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" onclick="hideUserModal()" class="cancel-btn">Hủy</button>
                    <button type="submit" id="userModalSubmit" class="submit-btn">Thêm người dùng</button>
                </div>
            </form>
        </div>
    </div>

    <div id="orderDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chi tiết đơn hàng <span id="orderDetailCode">ORDER001</span></h2>
                <span class="close" onclick="hideOrderDetailModal()">&times;</span>
            </div>
            
            <div class="modal-form">
                <div class="order-info-compact">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Mã đơn hàng:</label>
                            <span id="orderDetailCodeText">ORDER001</span>
                        </div>
                        <div class="info-item">
                            <label>Ngày đặt:</label>
                            <span id="orderDetailDate">26/10/2025</span>
                        </div>
                        <div class="info-item">
                            <label>Người dùng:</label>
                            <span id="orderDetailCustomer">Nguyễn Văn A</span>
                        </div>
                        <div class="info-item">
                            <label>Số điện thoại:</label>
                            <span id="orderDetailPhone">0901234567</span>
                        </div>
                        <div class="info-item">
                            <label>Email:</label>
                            <span id="orderDetailEmail">nguyenvana@gmail.com</span>
                        </div>
                        <div class="info-item">
                            <label>Trạng thái:</label>
                            <span id="orderDetailStatus" class="status-badge status-pending">Chưa xử lý</span>
                        </div>
                    </div>
                </div>

                <div class="address-section-compact">
                    <h4>Địa chỉ giao hàng</h4>
                    <div class="address-text">
                        <span id="orderDetailAddress">123 Đường Nguyễn Huệ, Phường Bến Nghé, Quận 1, TP.HCM</span>
                    </div>
                </div>
                
                <div class="order-summary-compact">
                    <div class="summary-row">
                        <div class="summary-item-compact">
                            <span class="label">Tổng số lượng:</span>
                            <span class="value highlight" id="orderDetailTotalItems">1</span>
                        </div>
                        <div class="summary-item-compact">
                            <span class="label">Tổng giá trị:</span>
                            <span class="value highlight" id="orderDetailTotal">2.280.000 ₫</span>
                        </div>
                    </div>
                </div>

                <div class="products-section-compact">
                    <h4>Sản phẩm trong đơn hàng</h4>
                    <div class="products-list-compact" id="orderDetailItems">
                        <div class="product-item-compact">
                            <div class="product-info-compact">
                                <span class="product-code">SKU001</span>
                                <span class="product-name">Sản phẩm mẫu 1</span>
                            </div>
                            <div class="product-details-compact">
                                <span class="quantity">SL: 1</span>
                                <span class="price">2.280.000 ₫</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="notes-section-compact">
                    <h4>Ghi chú</h4>
                    <div class="notes-text">
                        <span id="orderDetailNotes">Giao hàng trong giờ hành chính</span>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="hideOrderDetailModal()" class="cancel-btn">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <div id="receiptModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="receiptModalTitle">Tạo phiếu nhập mới</h2>
                <span class="close" onclick="hideReceiptModal()">&times;</span>
            </div>
            
            <form id="receiptForm" onsubmit="saveReceipt(event)" class="modal-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="receiptCode">Mã phiếu nhập <span class="required">*</span></label>
                        <input type="text" id="receiptCode" name="receiptCode" required readonly>
                    </div>
                    
                    <div class="form-group">
    <label for="receiptDate">Ngày nhập <span class="required">*</span></label>

    <div class="date-input-wrapper">
        <input type="text" id="receiptDate" name="receiptDate" required 
               placeholder="ngày/tháng/năm"
               onkeydown="handleDateKeydown(this, event); handleDateEnter(this, event)"
               onblur="formatAndValidateDate(this)"
               title="Nhập ngày/tháng/năm, nhấn Enter để xác nhận">

        <span class="calendar-icon" onclick="openDatePicker('receiptDate')" title="Chọn ngày từ lịch">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                <rect x="3" y="4" width="18" height="15" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        </span>
    </div>
</div>
                    
                    <div class="form-group">
                        <label for="receiptSupplier">Nhà cung cấp <span class="required">*</span></label>
                        <select id="receiptSupplier" name="receiptSupplier" required>
                            <option value="">Chọn nhà cung cấp</option>
                            <option value="Nhà cung cấp A">Nhà cung cấp A</option>
                            <option value="Nhà cung cấp B">Nhà cung cấp B</option>
                            <option value="Nhà cung cấp C">Nhà cung cấp C</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="receiptBatch">Số lô hàng</label>
                        <input type="text" id="receiptBatch" name="receiptBatch" placeholder="VD: LOT001-311025">
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>Sản phẩm trong phiếu nhập</h4>
                    <div id="receiptItemsContainer" class="receipt-items-container">
                        </div>
                    <div class="receipt-total">
                        <strong>Tổng số lượng: <span id="totalQuantity">0</span></strong>
                        <strong>Tổng tiền: <span id="totalAmount">0 ₫</span></strong>
                    </div>
                </div>
                
                <div class="form-group form-group-full">
                    <label for="receiptNotes">Ghi chú</label>
                    <textarea id="receiptNotes" name="receiptNotes" rows="3" placeholder="Ghi chú về lô hàng, chất lượng..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="hideReceiptModal()" class="cancel-btn">Hủy</button>
                    <button type="submit" id="receiptModalSubmit" class="submit-btn">Lưu phiếu nhập</button>
                </div>
            </form>
        </div>
    </div>

    <div id="receiptDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chi tiết phiếu nhập</h2>
                <span class="close" onclick="hideReceiptDetailModal()">&times;</span>
            </div>
            
            <div class="modal-form">
                <div class="receipt-info-compact">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Mã phiếu:</label>
                            <span id="receiptDetailCode">PN001</span>
                        </div>
                        <div class="info-item">
                            <label>Ngày nhập:</label>
                            <span id="receiptDetailDate">25/10/2025</span>
                        </div>
                        <div class="info-item">
                            <label>Nhà cung cấp:</label>
                            <span id="receiptDetailSupplier">Nhà cung cấp A</span>
                        </div>
                        <div class="info-item">
                            <label>Số lô hàng:</label>
                            <span id="receiptDetailBatch">LOT001-251025</span>
                        </div>
                        <div class="info-item">
                            <label>Trạng thái:</label>
                            <span id="receiptDetailStatus" class="status-badge status-active">HOÀN THÀNH</span>
                        </div>
                        <div class="info-item">
                            <label>Ghi chú:</label>
                            <span id="receiptDetailNotes">Lô hàng tháng 10 - Chất lượng tốt</span>
                        </div>
                    </div>
                </div>
                
                <div class="receipt-summary-compact">
                    <div class="summary-row">
                        <div class="summary-item-compact">
                            <span class="label">Tổng số lượng:</span>
                            <span class="value highlight" id="receiptDetailTotalItems">3</span>
                        </div>
                        <div class="summary-item-compact">
                            <span class="label">Tổng giá trị:</span>
                            <span class="value highlight" id="receiptDetailTotal">300.000 ₫</span>
                        </div>
                    </div>
                </div>
                
                <div class="products-section-compact">
                    <h4>Sản phẩm trong phiếu</h4>
                    <div class="products-list-compact" id="receiptDetailItems">
                        <div class="product-item-compact">
                            <div class="product-info-compact">
                                <span class="product-code">SKU001</span>
                                <span class="product-name">Naruto Sage Mode</span>
                            </div>
                            <div class="product-details-compact">
                                <span class="quantity">SL: 1</span>
                                <span class="price">300.000 ₫</span>
                            </div>
                        </div>
                        <div class="product-item-compact">
                            <div class="product-info-compact">
                                <span class="product-code">SKU002</span>
                                <span class="product-name">Tanjiro Kamado</span>
                            </div>
                            <div class="product-details-compact">
                                <span class="quantity">SL: 1</span>
                                <span class="price">300.000 ₫</span>
                            </div>
                        </div>
                        <div class="product-item-compact">
                            <div class="product-info-compact">
                                <span class="product-code">SKU003</span>
                                <span class="product-name">Raiden Shogun</span>
                            </div>
                            <div class="product-details-compact">
                                <span class="quantity">SL: 1</span>
                                <span class="price">300.000 ₫</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" onclick="hideReceiptDetailModal()" class="cancel-btn">Đóng</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>